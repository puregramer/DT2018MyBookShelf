"use strict";var $ANIDom=$ANIDom||{};$ANIDom=function(){window.requestAnimationFrame||(window.requestAnimationFrame=function(e){setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(window.requestAnimationFrame)});var e={ticking:"",animationList:[],currentAniFrame:"",style:document.createElement("p").style,memoized:{},animationFrames:function(t,n){var a=Date.now(),r=a+t,i=r+n,o={start:r,end:i};e.animationList.push(o),console.log("-> animationList : ",e.animationList),e.ticking||(e.ticking=!0,e.currentAniFrame=window.requestAnimationFrame(e.tick));var s={start:function(e){return o.startCallBack=e,s},progress:function(e){return o.progressCallBack=e,s},end:function(e){return o.endCallBack=e,s}};return s},tick:function(){var t=Date.now();if(!e.animationList.length)return void(e.ticking=!1);for(var n,a=0;a<e.animationList.length;a++)if(n=e.animationList[a],!(t<n.start)){n.started||(n.started=!0,n.startCallBack&&n.startCallBack());var r=(t-n.start)/(n.end-n.start);n.progressCallBack&&n.progressCallBack(r<1?r:1),t>n.end&&(n.endCallBack&&n.endCallBack(),e.animationList.splice(a--,1),window.cancelAnimationFrame(e.currentAniFrame))}e.currentAniFrame=window.requestAnimationFrame(e.tick)},prefix:function(t){if("undefined"!=typeof e.memoized[t])return e.memoized[t];if("undefined"!=typeof e.style[t])return e.memoized[t]=t,t;for(var n,a=t[0].toUpperCase()+t.slice(1),r=["webkit","moz","Moz","ms","o"],i=0,o=r.length;i<o;i++)if(n=r[i]+a,"undefined"!=typeof e.style[n])return e.memoized[t]=n,n},createElement:function(e){return document.createElement(e)},has3d:"",check3d:function(){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!t)return!1;var n=e.prefix("transform"),a=e.createElement("p");return document.body.appendChild(a),a.style[n]="translate3d(1px,1px,1px)",e.has3d=a.style[n],e.has3d=null!=e.has3d&&e.has3d.length&&"none"!==e.has3d,document.body.removeChild(a),e.has3d},translate:function(t,n,a){return"undefined"!=typeof e.has3d||(e.has3d=e.check3d()),a=a||0,e.has3d?"translate3d("+t+", "+n+", "+a+")":"translate("+t+", "+n+")"},ease:{linear:function(e){return e},quadIn:function(e){return e*e},quadOut:function(e){return e*(2-e)},quadInOut:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},quartIn:function(e){return e*e*e*e},quartOut:function(e){return 1- --e*e*e*e},quartInOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},quintIn:function(e){return e*e*e*e*e},quintOut:function(e){return 1+--e*e*e*e*e},quintInOut:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},elastic:function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*1.5/3*e)},quad:function(e){return Math.pow(e,2)},quint:function(e){return Math.pow(e,5)},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e){return Math.pow(e,2)*(2.5*e-1.5)},bounce:function(e){for(var t=0,n=1;1;t+=n,n/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)}},addAni:function(t){console.log("--> addAni : ",t);var n,a,r,i,o,s=e.prefix("transform"),u=t.start?t.start.x:0,c=t.start?t.start.y:0,l=t.start?t.start.rot:0,d=t.start?t.start.scale:0,m=t.start?t.start.opacity:0,f=t.destination.x,p=t.destination.y,h=t.destination.rot,w=t.destination.scale,g=t.destination.opacity;e.animationFrames(t.delay,t.duration).start(function(){console.log("-> start animation!")}).progress(function(v){var y,k,A,b,E;switch(t.ease.apply){case"x":y=e.ease[t.ease.type](v),k=v,A=v,b=v,E=v;break;case"y":y=v,k=e.ease[t.ease.type](v),A=v,b=v,E=v;break;case"all":y=e.ease[t.ease.type](v),k=e.ease[t.ease.type](v),A=e.ease[t.ease.type](v),b=e.ease[t.ease.type](v),E=e.ease[t.ease.type](v)}n=u+f*y,a=c+p*k,r=l+h*A,i=d+w*b,o=m+g*E,t.target.style[s]=e.translate(n+"px",a+"px")+(r?"rotate("+r+"deg)":"")+(i?"scale("+i+")":""),t.target.style.opacity=o}).end(function(){console.log("-> end animation!"),t.callBack&&t.callBack()})},Draggable:function(t){e.element=t,e.parentElement=window,e.createDragdrop()},createDragdrop:function(){var t=this,n=function(e){e.preventDefault();var n=e;e.touches&&(n=e.touches.item(0)),t.offY=n.clientY,t.offX=n.clientX,this.style.zIndex=100,t.parentElement.addEventListener("mousemove",a,!0),t.parentElement.addEventListener("touchmove",a,!0)},a=function(n){n.preventDefault();var a=n;n.touches&&(a=n.touches.item(0));var r=t.element.getAttribute("transX"),i=t.element.getAttribute("transY");null===r?(r=0,i=0):(r=parseInt(r),i=parseInt(i)),t.newY=a.clientY+i-t.offY,t.newX=a.clientX+r-t.offX,console.log("- drag.newX : ",t.newX),console.log("- drag.newY : ",t.newY),t.element.style[e.prefix("transform")]=e.translate(t.newX+"px",t.newY+"px")},r=function(e){var n=e;e.touches&&(n=e.changedTouches[0]),this.style.zIndex=1,this.setAttribute("transX",t.newX),this.setAttribute("transY",t.newY),t.parentElement.removeEventListener("mousemove",a,!0),t.parentElement.removeEventListener("touchmove",a,!0)};t.element.addEventListener("mousedown",n,!1),t.element.addEventListener("touchstart",n,!1),t.element.addEventListener("mouseup",r,!1),t.element.addEventListener("touchend",r,!1)}};return{addAni:e.addAni,Draggable:e.Draggable}}();