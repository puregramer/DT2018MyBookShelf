"use strict";var $DT2017=$DT2017||{};$DT2017.bookCase=function(){var e={currentBookCaseIndex:0,currentBookCase:null,init:function(e){var o=this,t=$alt.ce({tag:"div","class":"topMenubarBottomShelfList",targetElement:e}),a=($alt.ce({tag:"div","class":"topMenubarBottomShelfListText",targetElement:t}),$alt.ce({tag:"div","class":"previewLeftBookCase",html:this.getBookCaseName("prev"),targetElement:t}),$alt.ce({tag:"div","class":"previewRightBookCase",html:this.getBookCaseName("next"),targetElement:t}),$alt.ce({tag:"img","class":"headerShelfListLeftArrow",src:"./images/header/header_leftArrow.png",targetElement:t}));a.addEventListener("click",function(e){e.preventDefault();var t=$DT2017.bookCase.currentBookCaseIndex;t--,console.log("-currentBookCaseIndex: ",t),t<0?$DT2017.notice.show({noticeText:"첫 번째 책장입니다!",buttonText:"확 인",clickEvent:function(){console.log("> clickEvent!"),$DT2017.notice.hide()}}):($DT2017.bookCase.currentBookCaseIndex=t,o.selectBookCaseName($DT2017.core.bookCaseList[t]),$DT2017.view.reload())},!1);var r=$alt.ce({tag:"img","class":"headerShelfListRightArrow",src:"./images/header/header_rightArrow.png",targetElement:t});r.addEventListener("click",function(e){e.preventDefault();var t=$DT2017.bookCase.currentBookCaseIndex;t++,console.log("-currentBookCaseIndex: ",t),t>$DT2017.core.bookCaseList.length-1?$DT2017.notice.show({noticeText:"마지막 책장입니다!",buttonText:"확 인",clickEvent:function(){console.log("> clickEvent!"),$DT2017.notice.hide()}}):($DT2017.bookCase.currentBookCaseIndex=t,o.selectBookCaseName($DT2017.core.bookCaseList[t]),$DT2017.view.reload())},!1),$DT2017.core.bookCaseList.forEach(function(e,t){"yes"===e.isDefaultShelf.toLowerCase().trim()&&(o.selectBookCaseName(e),o.currentBookCase=e.name)})},selectBookCaseName:function(e){$DT2017.core.selectedBookCase.bookCaseName=e.name,$DT2017.core.selectedBookCase.bookGroup=e.bookRef,$alt.qs(".topMenubarBottomShelfListText").innerHTML=e.name+" ("+e.bookRef.length+"권)",$alt.qs(".previewLeftBookCase").innerHTML=this.getBookCaseName("prev"),$alt.qs(".previewRightBookCase").innerHTML=this.getBookCaseName("next"),this.getCurrentBookListBySort({bookGroup:e.bookRef})},getCurrentBookListBySort:function(e){var o=[];$DT2017.core.contentsList.forEach(function(t,a){for(var r=0;r<e.bookGroup.length;r++)e.bookGroup[r].bookId.trim()===t.bookId.trim()&&o.push(t)}),$DT2017.core.currentSortType?(console.log(">> sort by name"),o.sort(function(e,o){return e.metadata.title>o.metadata.title?1:o.metadata.title>e.metadata.title?-1:0})):console.log(">> sort by date"),$DT2017.core.selectedBookCase.currentBookList=o},getBookCaseName:function(e){var o="",t=$DT2017.bookCase.currentBookCaseIndex;switch(e){case"prev":$DT2017.core.bookCaseList[t-1]&&(o=$DT2017.core.bookCaseList[t-1].name);break;case"next":$DT2017.core.bookCaseList[t+1]&&(o=$DT2017.core.bookCaseList[t+1].name)}return o}};return e}();