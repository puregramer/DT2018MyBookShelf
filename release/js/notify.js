"use strict";var $DT2017=$DT2017||{};$DT2017.notify=function(){var t={currentIndex:0,appendNotifyContainer:function(t){var e=this,n=$alt.ce({tag:"div","class":"notifyContainer",targetElement:t.targetElement}),i=$alt.ce({tag:"div","class":"notifyCellArea",targetElement:n}),o=$alt.ce({tag:"div","class":"notifyTitleBox",targetElement:i}),a=($alt.ce({tag:"div","class":"notifyTitleText",html:"faq"===t.mode?"FAQ":"공지사항",targetElement:o}),this.getNotifyBodySize());o.style.width=a.bodyWidth,o.style.height=a.bodyHeight,i.style.marginTop=a.cellAreaMarginTop,i.style.marginLeft=-(o.clientWidth/2)+"px";var l=$alt.ce({tag:"img","class":"notifyBoxClose",src:"./images/bookDetailView/btn_home.png",targetElement:o});l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.closeNotifyContainer("list",n)},!1);var r=$alt.ce({tag:"img","class":"notifySyncBtn",src:"./images/notify/notify_syncIcon.png",targetElement:o});"faq"===t.mode?(r.addEventListener("click",function(t){t.preventDefault(),console.log("--> notifySyncBtn!"),$DT2017.apiBridge.getFaqList().then(function(t){console.log("~> faqList: ",t),$DT2017.core.faqList=t,e.closeNotifyContainer("list",n),$DT2017.notify.appendNotifyContainer({targetElement:document.body,mode:"faq"})})},!1),this.initFaqList({targetElement:o,listBoxHeight:a.listBoxHeight,listBoxMarginTop:a.listBoxMarginTop,listBoxMarginRL:a.listBoxMarginRL,itemWidth:a.itemWidth,fontSize:a.fontSize})):(r.addEventListener("click",function(t){t.preventDefault(),console.log("--> notifySyncBtn!"),$DT2017.apiBridge.getSliderMenuInfo(function(){e.closeNotifyContainer("list",n),e.appendNotifyContainer({targetElement:document.body})})},!1),this.initNoticeList({targetElement:o,listBoxHeight:a.listBoxHeight,listBoxMarginTop:a.listBoxMarginTop,listBoxMarginRL:a.listBoxMarginRL,itemWidth:a.itemWidth,fontSize:a.fontSize}))},closeNotifyContainer:function(t,e){switch(t){case"list":document.body.removeChild(e);break;case"content":$alt.qs(".notifyTitleBox").removeChild(e)}},initFaqList:function(t){var e=this,n=$alt.ce({tag:"div","class":"noticeListBox",targetElement:t.targetElement});if(n.style.height=t.listBoxHeight,n.style.marginTop=t.listBoxMarginTop,n.style.marginLeft=t.listBoxMarginRL,n.style.marginRight=t.listBoxMarginRL,$DT2017.core.faqList.length>0)$DT2017.core.faqList.forEach(function(i,o){var a=$alt.ce({tag:"div","class":"noticeItemBox",targetElement:n}),l=$alt.ce({tag:"div","class":"noticeLabel",html:i.division,targetElement:a}),r=$alt.ce({tag:"div","class":"noticeItem",html:i.title,targetElement:a}),c=$alt.ce({tag:"div","class":"noticeDate",html:$DT2017.core.convertDate(i.createDate),targetElement:a});r.style.width=t.itemWidth.replace("px","")-50+"px",r.style.fontSize=t.fontSize+"px",c.style.fontSize=t.fontSize-2+"px",a.setAttribute("idx",o),a.addEventListener("mouseover",function(t){t.preventDefault(),r.style.color="#5b71d6",c.style.color="#5b71d6",l.style.color="#5b71d6"},!1),a.addEventListener("mouseout",function(t){t.preventDefault(),r.style.color="#555",c.style.color="#aaa",l.style.color="#555"},!1),a.addEventListener("click",function(n){n.preventDefault();var i=this.getAttribute("idx");e.currentIndex=i,e.showNotifyContent({targetElement:t.targetElement,noticeData:$DT2017.core.faqList[i],type:"faq"})},!1)});else{var i=$alt.ce({tag:"div","class":"noticeItemBox",targetElement:n}),o=$alt.ce({tag:"div","class":"noticeItem",html:"등록된 FAQ가 없습니다.",targetElement:i});o.style.width="100%",o.style.textAlign="center",o.style.paddingLeft="0px"}},initNoticeList:function(t){var e=this,n=$alt.ce({tag:"div","class":"noticeListBox",targetElement:t.targetElement});if(n.style.height=t.listBoxHeight,n.style.marginTop=t.listBoxMarginTop,n.style.marginLeft=t.listBoxMarginRL,n.style.marginRight=t.listBoxMarginRL,$DT2017.core.noticeList.length>0)$DT2017.core.noticeList.forEach(function(i,o){var a=$alt.ce({tag:"div","class":"noticeItemBox",targetElement:n}),l=$alt.ce({tag:"div","class":"noticeItem",html:i.title,targetElement:a}),r=$alt.ce({tag:"div","class":"noticeDate",html:$DT2017.core.convertDate(i.createDate),targetElement:a});l.style.width=t.itemWidth,l.style.fontSize=t.fontSize+"px",r.style.fontSize=t.fontSize-2+"px",a.setAttribute("idx",o),a.addEventListener("mouseover",function(t){t.preventDefault(),l.style.color="#5b71d6",r.style.color="#5b71d6"},!1),a.addEventListener("mouseout",function(t){t.preventDefault(),l.style.color="#555",r.style.color="#aaa"},!1),a.addEventListener("click",function(n){n.preventDefault();var i=this.getAttribute("idx");e.currentIndex=i,e.showNotifyContent({targetElement:t.targetElement,noticeData:$DT2017.core.noticeList[i]})},!1)});else{var i=$alt.ce({tag:"div","class":"noticeItemBox",targetElement:n}),o=$alt.ce({tag:"div","class":"noticeItem",html:"등록된 공지사항이 없습니다.",targetElement:i});o.style.width="100%",o.style.textAlign="center",o.style.paddingLeft="0px"}},showNotifyContent:function(t){console.log("--> showNotifyContent!");var e=this,n="faq"===t.type?$DT2017.core.faqList:$DT2017.core.noticeList,i=$alt.ce({tag:"div","class":"notifyContentContainer",targetElement:t.targetElement}),o=$alt.ce({tag:"div","class":"notifyContentTitleBox",targetElement:i}),a=($alt.ce({tag:"div","class":"notifyTitleText",html:"faq"===t.type?"FAQ":"공지사항",targetElement:o}),this.getNotifyContentSize()),l=$alt.ce({tag:"img","class":"notifyContentBoxClose",src:"./images/notify/notify_closeBtn.png",targetElement:o});l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.closeNotifyContainer("content",i)},!1);var r=$alt.ce({tag:"div","class":"noticeListBox",targetElement:i}),c=$alt.ce({tag:"div","class":"noticeItemBox",targetElement:r}),s=$alt.ce({tag:"div","class":"noticeItem",html:("faq"===t.type?"["+t.noticeData.division+"] ":"")+t.noticeData.title,targetElement:c}),g=$alt.ce({tag:"div","class":"noticeDate",html:$DT2017.core.convertDate(t.noticeData.createDate),targetElement:c});c.style.cursor="default",c.style.backgroundColor="#fff",c.style.fontWeight="800",s.style.width=a.itemWidth,s.style.fontSize=a.fontSize+"px",s.style.lineHeight=a.lineHight+"px",g.style.fontSize=a.fontSize-2+"px",r.style.height=a.listBoxHeight,r.style.backgroundColor="#fff";var d=$alt.ce({tag:"div","class":"noticeItemContentBox",targetElement:r,html:t.noticeData.content.replace(/\n/g,"<br>")});d.style.fontSize=a.fontSize+"px";var f=d.querySelectorAll("img");console.log("~~> ** noticeImgs: ",f);for(var y=0;y<f.length;y++)f[y].style.width=d.clientWidth-20+"px",f[y].style.height="auto";var m=$alt.ce({tag:"div","class":"noticeItemNavBox",targetElement:i}),x=$alt.ce({tag:"div","class":"noticeItemPrevBtn",html:"< 이전 글",targetElement:m}),v=$alt.ce({tag:"div","class":"noticeItemNextBtn",html:"다음 글 >",targetElement:m});x.style.backgroundColor="#7d7d7d",x.style.marginRight="20px",v.style.backgroundColor="#f26422",x.addEventListener("click",function(o){o.preventDefault(),e.currentIndex--,console.log("- currentIndex: ",e.currentIndex),e.closeNotifyContainer("content",i),e.showNotifyContent({targetElement:$alt.qs(".notifyTitleBox"),noticeData:n[e.currentIndex],type:t.type})},!1),v.addEventListener("click",function(o){o.preventDefault(),e.currentIndex++,console.log("- currentIndex: ",e.currentIndex),e.closeNotifyContainer("content",i),e.showNotifyContent({targetElement:$alt.qs(".notifyTitleBox"),noticeData:n[e.currentIndex],type:t.type})},!1),console.log("---> currentIndex: ",e.currentIndex),0==e.currentIndex&&e.setDisable(x),e.currentIndex==n.length-1&&e.setDisable(v),$alt.addSwipeEvent({targetElement:i,callBack:function(t){switch(console.log("--> direction: ",t),t){case"none":break;case"left":e.currentIndex<n.length-1&&v.click();break;case"right":e.currentIndex>0&&x.click()}}})},setDisable:function(t){t.style.opacity=.3,t.style.pointerEvents="none"},firstPop:function(){var e=$alt.getURLParameter("notify");if("true"===e&&$DT2017.core.noticeList.length>0){t.appendNotifyContainer({targetElement:document.body});for(var n=$DT2017.core.noticeList.reduce(function(t,e){return t.createDate>e.createDate?t:e}),i=0;i<$DT2017.core.noticeList.length;i++)if($DT2017.core.noticeList[i].createDate===n.createDate){$alt.qsa(".noticeItemBox")[i].click();break}$alt.qs(".notifyContentBoxClose").addEventListener("click",function(t){t.preventDefault(),$alt.qs(".notifyBoxClose").click()},!1)}},clearNotify:function(){var t=$alt.qs(".notifyContainer");t&&document.body.removeChild(t)},getNotifyBodySize:function(){var t,e,n,i,o,a,l,r;return $DT2017.responsive.screenSize.width<=$DT2017.responsive.responsivePointHiDPI.smallMobile?(t="310px",e="350px",n="-175px",i="265px",o="15px",a="5px",l="170px",r=13):(t="600px",e="360px",n="-180px",i="270px",o="30px",a="25px",l="400px",r=15),{bodyWidth:t,bodyHeight:e,cellAreaMarginTop:n,listBoxHeight:i,listBoxMarginTop:o,listBoxMarginRL:a,itemWidth:l,fontSize:r}},getNotifyContentSize:function(){var t,e,n,i;return $DT2017.responsive.screenSize.width<=$DT2017.responsive.responsivePointHiDPI.smallMobile?(t="216px",e="190px",n=13,i=18):(t="240px",e="600px",n=15,i=25),{listBoxHeight:t,itemWidth:e,fontSize:n,lineHeight:i}}};return t}();